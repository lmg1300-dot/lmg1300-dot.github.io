<script>
  // Use the global Supabase object provided by the CDN
  const supabaseClient = supabase.createClient(
    "https://mzgpoywetbzmkanwglqh.supabase.co",
    "sb_publishable_OPlr6jJkydnsSGsoeLpWuw_nNt66omz"
  );

  const btn = document.getElementById("loginBtn");
  const emailInput = document.getElementById("email");
  const message = document.getElementById("message");

  btn.addEventListener("click", async () => {
    const email = emailInput.value.trim();
    if (!email) return;

    btn.disabled = true;
    btn.innerText = "Sending linkâ€¦";

    const { error } = await supabaseClient.auth.signInWithOtp({
      email,
      options: {
        emailRedirectTo: "https://lmg1300-dot.github.io/dashboard.html"
      }
    });

    if (error) {
      alert(error.message);
    } else {
      message.style.display = "block";
    }

    btn.innerText = "Send Magic Link";
    btn.disabled = false;
  });
</script>

